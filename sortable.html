<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>

<style type="text/css">
    #list {
        list-style-type: none;
    }

    li {
        background-color: lavender;
        height: 40px;
        width: 100px;
        margin: 3px;
    }

    #drag {

        z-index: 10;
    }
</style>
<body>
<ul id="list">
    <li class="over">1</li>
    <li class="over">2</li>
    <li class="over">3</li>
    <li class="over">4</li>
    <li class="over">5</li>
    <li class="over">6</li>
    <li class="over">7</li>
</ul>
<script src="js/vendor/jquery.js"></script>
<script src="libs/jquery.mobile.touchEvents.min.js"></script>
<script src="libs/jquery-ui.min.js"></script>
<script src="libs/jquery.ui.touch-punch.min.js"></script>
<script type="text/javascript">
    //MOUSE
    $("li").on("mousedown", function (e) {
        $(document).css("user-select", "none").attr('unselectable', 'on').on('selectstart', false);
        $(this).addClass("drag");
//Invert left right and bottom top for rotation
        $(document).on("mousemove", function (e) {
            $(".drag").css({position: "absolute", left: e.pageX, top: e.pageY});
            $("li").on("mouseenter", function (e) {
                $(".over").removeClass("over");
                left = e.pageX;
                top = e.pageY;
                $(this).addClass("over");
                console.log($(this).html())

            })

        });
        $(document).on("mouseup", function (e) {
            console.log("UP")

            $(".drag").insertAfter($(".over"));

            $(".drag").css({position: "relative", left: "auto", top: "auto"})
            $(".over").removeClass("over");
            $(".drag").removeClass("drag");
            $(document).off("mousemove")
        })
    })

    //TOUCH
    $("li").on("touchstart", function (e) {
        $(document).css("user-select", "none").attr('unselectable', 'on').on('selectstart', false);
        $(this).addClass("drag");

//Invert left right and bottom top for rotation
        $(document).on("touchmove", function (e) {
            $(".drag").css({
                position: "absolute",
                left: e.originalEvent.targetTouches[0].pageX,
                top: e.originalEvent.targetTouches[0].pageY
            });



        });
        $(document).on("touchend", function (e) {
            console.log(e)

            var items = $("#list").find(".over");
            $(".over").each(function (index) {
                distances = [];
                var offset = $(this).offset().top
                console.log(offset)
                var top = e.originalEvent.targetTouches[0].pageY;

                var dist = offset - top;
                distances.push(dist)
            });

            for (var i in distances) {
                console.log(distances[i])
            }
            console.log("UP")


            $(".drag").insertAfter($(".over"));
            $(".drag").css({position: "relative", left: "auto", top: "auto"});

            $(".over").removeClass("over");
            $(".drag").removeClass("drag");
            $(document).off("touchstart")
        })
    })
    function closest(selector) {

    }
    //http://api.jquery.com/insertafter/
    //http://stackoverflow.com/questions/13156010/prevent-highlighting-text-on-mousedown
</script>
</body>
</html>